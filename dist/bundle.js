!function(n){var e={};function t(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return n[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=n,t.c=e,t.d=function(n,e,r){t.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:r})},t.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,e){if(1&e&&(n=t(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var o in n)t.d(r,o,function(e){return n[e]}.bind(null,o));return r},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},t.p="",t(t.s=0)}([function(n,e,t){"use strict";t.r(e);t(1);document.body.appendChild(document.createElement("div")),window.onload=function(){var n=new(function(){function e(){this.monstersInput=document.querySelectorAll("#monsters input"),this.monsterList=[],this.currentmonster=0,this.getMonsters(),this.player=document.querySelector("#playerData"),this.actionList=document.querySelector("#console")}return e.prototype.getMonsters=function(){for(var n=0,e=this.monstersInput;n<e.length;n++){var t=e[n];this.monsterList.push(t.dataset.name),this.monsterList.push(t.dataset.health),this.monsterList.push(t.dataset.strength)}},e.prototype.logger=function(){var n=document.createElement("p");n.innerHTML="You did "+this.player.dataset.strength+" damage, "+this.monsterList[this.currentmonster]+" hit you for "+this.monsterList[this.currentmonster+2]+" damage!",this.actionList.appendChild(n)},e.prototype.render=function(){document.querySelector("#playerName").value=this.player.dataset.name,document.querySelector("#playerStrength").value=this.player.dataset.strength,document.querySelector("#playerHealth").value=this.player.dataset.health;var e=document.querySelector("#monsterName");e.value=this.monsterList[this.currentmonster],document.querySelector("#monsterHealth").value=this.monsterList[this.currentmonster+1],document.querySelector("#monsterStrength").value=this.monsterList[this.currentmonster+2];var t=document.querySelector("#monsterIcon");0==this.currentmonster&&(t.src="img/skel.jpg"),3==this.currentmonster&&(t.src="img/y.jpg"),6==this.currentmonster&&(t.src="img/skel.jpg"),9==this.currentmonster&&(t.src="img/y.jpg"),n.currentmonster>n.monsterList.length-1?e.value="":this.logger()},e}());n.render(),document.querySelector("#fight").onclick=function(e){n.player.dataset.health=n.player.dataset.health-n.monsterList[n.currentmonster+2],n.monsterList[n.currentmonster+1]=n.monsterList[n.currentmonster+1]-n.player.dataset.strength,n.monsterList[n.currentmonster+1]<=0&&(n.currentmonster=n.currentmonster+3),n.currentmonster>n.monsterList.length-1&&alert("Winner winner Chicken Dinner!"),n.render()}}},function(n,e,t){var r=t(2);"string"==typeof r&&(r=[[n.i,r,""]]);var o={insert:"head",singleton:!1};t(4)(r,o);r.locals&&(n.exports=r.locals)},function(n,e,t){(n.exports=t(3)(!1)).push([n.i,'/* \nhtml5doctor.com Reset Stylesheet\nv1.6.1\nLast Updated: 2010-09-17\nAuthor: Richard Clark - http://richclarkdesign.com \nTwitter: @rich_clark\n*/\n\nhtml,\nbody,\ndiv,\nspan,\nobject,\niframe,\nh1,\nh2,\nh3,\nh4,\nh5,\nh6,\np,\nblockquote,\npre,\nabbr,\naddress,\ncite,\ncode,\ndel,\ndfn,\nem,\nimg,\nins,\nkbd,\nq,\nsamp,\nsmall,\nstrong,\nsub,\nsup,\nvar,\nb,\ni,\ndl,\ndt,\ndd,\nol,\nul,\nli,\nfieldset,\nform,\nlabel,\nlegend,\ntable,\ncaption,\ntbody,\ntfoot,\nthead,\ntr,\nth,\ntd,\narticle,\naside,\ncanvas,\ndetails,\nfigcaption,\nfigure,\nfooter,\nheader,\nhgroup,\nmenu,\nnav,\nsection,\nsummary,\ntime,\nmark,\naudio,\nvideo {\n  margin: 0;\n  padding: 0;\n  border: 0;\n  outline: 0;\n  font-size: 100%;\n  vertical-align: baseline;\n  background: transparent;\n}\n\nbody {\n  line-height: 1;\n}\n\narticle,\naside,\ndetails,\nfigcaption,\nfigure,\nfooter,\nheader,\nhgroup,\nmenu,\nnav,\nsection {\n  display: block;\n}\n\nnav ul {\n  list-style: none;\n}\n\nblockquote,\nq {\n  quotes: none;\n}\n\nblockquote:before,\nblockquote:after,\nq:before,\nq:after {\n  content: "";\n  content: none;\n}\n\na {\n  margin: 0;\n  padding: 0;\n  font-size: 100%;\n  vertical-align: baseline;\n  background: transparent;\n}\n\n/* change colours to suit your needs */\nins {\n  background-color: #ff9;\n  color: #000;\n  text-decoration: none;\n}\n\n/* change colours to suit your needs */\nmark {\n  background-color: #ff9;\n  color: #000;\n  font-style: italic;\n  font-weight: bold;\n}\n\ndel {\n  text-decoration: line-through;\n}\n\nabbr[title],\ndfn[title] {\n  border-bottom: 1px dotted;\n  cursor: help;\n}\n\ntable {\n  border-collapse: collapse;\n  border-spacing: 0;\n}\n\n/* change border colour to suit your needs */\nhr {\n  display: block;\n  height: 1px;\n  border: 0;\n  border-top: 1px solid #cccccc;\n  margin: 1em 0;\n  padding: 0;\n}\n\ninput,\nselect {\n  vertical-align: middle;\n}\n#header {\n  text-align: center;\n  background: bisque;\n  padding: 20px;\n  clear: both;\n  border-bottom: 3px solid gray;\n}\n#header h1 {\n  font-size: 40px;\n}\n#monsters {\n  display: none;\n}\n#combatArea {\n  display: flex;\n  align-items: center;\n}\n#player,\n#monster {\n  padding: 20px 40px;\n  text-align: center;\n  flex-grow: 2;\n}\n#fight {\n  flex-grow: 1;\n}\nlabel {\n  display: inline-block;\n  min-width: 100px;\n}\n',""])},function(n,e,t){"use strict";n.exports=function(n){var e=[];return e.toString=function(){return this.map(function(e){var t=function(n,e){var t=n[1]||"",r=n[3];if(!r)return t;if(e&&"function"==typeof btoa){var o=(a=r,s=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(c," */")),i=r.sources.map(function(n){return"/*# sourceURL=".concat(r.sourceRoot).concat(n," */")});return[t].concat(i).concat([o]).join("\n")}var a,s,c;return[t].join("\n")}(e,n);return e[2]?"@media ".concat(e[2],"{").concat(t,"}"):t}).join("")},e.i=function(n,t){"string"==typeof n&&(n=[[null,n,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];null!=i&&(r[i]=!0)}for(var a=0;a<n.length;a++){var s=n[a];null!=s[0]&&r[s[0]]||(t&&!s[2]?s[2]=t:t&&(s[2]="(".concat(s[2],") and (").concat(t,")")),e.push(s))}},e}},function(n,e,t){"use strict";var r,o={},i=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},a=function(){var n={};return function(e){if(void 0===n[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(n){t=null}n[e]=t}return n[e]}}();function s(n,e){for(var t=[],r={},o=0;o<n.length;o++){var i=n[o],a=e.base?i[0]+e.base:i[0],s={css:i[1],media:i[2],sourceMap:i[3]};r[a]?r[a].parts.push(s):t.push(r[a]={id:a,parts:[s]})}return t}function c(n,e){for(var t=0;t<n.length;t++){var r=n[t],i=o[r.id],a=0;if(i){for(i.refs++;a<i.parts.length;a++)i.parts[a](r.parts[a]);for(;a<r.parts.length;a++)i.parts.push(m(r.parts[a],e))}else{for(var s=[];a<r.parts.length;a++)s.push(m(r.parts[a],e));o[r.id]={id:r.id,refs:1,parts:s}}}}function l(n){var e=document.createElement("style");if(void 0===n.attributes.nonce){var r=t.nc;r&&(n.attributes.nonce=r)}if(Object.keys(n.attributes).forEach(function(t){e.setAttribute(t,n.attributes[t])}),"function"==typeof n.insert)n.insert(e);else{var o=a(n.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(e)}return e}var u,d=(u=[],function(n,e){return u[n]=e,u.filter(Boolean).join("\n")});function p(n,e,t,r){var o=t?"":r.css;if(n.styleSheet)n.styleSheet.cssText=d(e,o);else{var i=document.createTextNode(o),a=n.childNodes;a[e]&&n.removeChild(a[e]),a.length?n.insertBefore(i,a[e]):n.appendChild(i)}}var h=null,f=0;function m(n,e){var t,r,o;if(e.singleton){var i=f++;t=h||(h=l(e)),r=p.bind(null,t,i,!1),o=p.bind(null,t,i,!0)}else t=l(e),r=function(n,e,t){var r=t.css,o=t.media,i=t.sourceMap;if(o&&n.setAttribute("media",o),i&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),n.styleSheet)n.styleSheet.cssText=r;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(r))}}.bind(null,t,e),o=function(){!function(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n)}(t)};return r(n),function(e){if(e){if(e.css===n.css&&e.media===n.media&&e.sourceMap===n.sourceMap)return;r(n=e)}else o()}}n.exports=function(n,e){(e=e||{}).attributes="object"==typeof e.attributes?e.attributes:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=i());var t=s(n,e);return c(t,e),function(n){for(var r=[],i=0;i<t.length;i++){var a=t[i],l=o[a.id];l&&(l.refs--,r.push(l))}n&&c(s(n,e),e);for(var u=0;u<r.length;u++){var d=r[u];if(0===d.refs){for(var p=0;p<d.parts.length;p++)d.parts[p]();delete o[d.id]}}}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LnRzIiwid2VicGFjazovLy8uL3NyYy9zdHlsZS5jc3M/OTgxOSIsIndlYnBhY2s6Ly8vLi9zcmMvc3R5bGUuY3NzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiZG9jdW1lbnQiLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJjcmVhdGVFbGVtZW50Iiwid2luZG93Iiwib25sb2FkIiwiZ28iLCJ0aGlzIiwibW9uc3RlcnNJbnB1dCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJtb25zdGVyTGlzdCIsImN1cnJlbnRtb25zdGVyIiwiZ2V0TW9uc3RlcnMiLCJwbGF5ZXIiLCJxdWVyeVNlbGVjdG9yIiwiYWN0aW9uTGlzdCIsIm1vbnN0ZXIiLCJwdXNoIiwiZGF0YXNldCIsImhlYWx0aCIsInN0cmVuZ3RoIiwibG9nZ2VyIiwiZWxlbWVudCIsImlubmVySFRNTCIsInJlbmRlciIsIm1vbnN0ZXJOYW1lIiwibW9uc3RlcmxvZ28iLCJzcmMiLCJsZW5ndGgiLCJvbmNsaWNrIiwiZSIsImFsZXJ0IiwiY29udGVudCIsIm9wdGlvbnMiLCJsb2NhbHMiLCJ1c2VTb3VyY2VNYXAiLCJsaXN0IiwidG9TdHJpbmciLCJtYXAiLCJpdGVtIiwiY3NzTWFwcGluZyIsImJ0b2EiLCJzb3VyY2VNYXBwaW5nIiwic291cmNlTWFwIiwiYmFzZTY0IiwidW5lc2NhcGUiLCJlbmNvZGVVUklDb21wb25lbnQiLCJKU09OIiwic3RyaW5naWZ5IiwiZGF0YSIsImNvbmNhdCIsInNvdXJjZVVSTHMiLCJzb3VyY2VzIiwic291cmNlIiwic291cmNlUm9vdCIsImpvaW4iLCJjc3NXaXRoTWFwcGluZ1RvU3RyaW5nIiwibWVkaWFRdWVyeSIsImFscmVhZHlJbXBvcnRlZE1vZHVsZXMiLCJpZCIsIl9pIiwibWVtbyIsInN0eWxlc0luRG9tIiwiaXNPbGRJRSIsIkJvb2xlYW4iLCJhbGwiLCJhdG9iIiwiZ2V0VGFyZ2V0IiwidGFyZ2V0Iiwic3R5bGVUYXJnZXQiLCJIVE1MSUZyYW1lRWxlbWVudCIsImNvbnRlbnREb2N1bWVudCIsImhlYWQiLCJsaXN0VG9TdHlsZXMiLCJzdHlsZXMiLCJuZXdTdHlsZXMiLCJiYXNlIiwicGFydCIsImNzcyIsIm1lZGlhIiwicGFydHMiLCJhZGRTdHlsZXNUb0RvbSIsImRvbVN0eWxlIiwiaiIsInJlZnMiLCJhZGRTdHlsZSIsImluc2VydFN0eWxlRWxlbWVudCIsInN0eWxlIiwiYXR0cmlidXRlcyIsIm5vbmNlIiwia2V5cyIsImZvckVhY2giLCJzZXRBdHRyaWJ1dGUiLCJpbnNlcnQiLCJFcnJvciIsInRleHRTdG9yZSIsInJlcGxhY2VUZXh0IiwiaW5kZXgiLCJyZXBsYWNlbWVudCIsImZpbHRlciIsImFwcGx5VG9TaW5nbGV0b25UYWciLCJyZW1vdmUiLCJvYmoiLCJzdHlsZVNoZWV0IiwiY3NzVGV4dCIsImNzc05vZGUiLCJjcmVhdGVUZXh0Tm9kZSIsImNoaWxkTm9kZXMiLCJyZW1vdmVDaGlsZCIsImluc2VydEJlZm9yZSIsInNpbmdsZXRvbiIsInNpbmdsZXRvbkNvdW50ZXIiLCJ1cGRhdGUiLCJzdHlsZUluZGV4IiwiZmlyc3RDaGlsZCIsInBhcmVudE5vZGUiLCJyZW1vdmVTdHlsZUVsZW1lbnQiLCJuZXdPYmoiLCJuZXdMaXN0IiwibWF5UmVtb3ZlIiwiX2RvbVN0eWxlIl0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0RHLEVBQU9FLEdBQUksRUFHSkYsRUFBT0QsUUFLZkYsRUFBb0JRLEVBQUlGLEVBR3hCTixFQUFvQlMsRUFBSVYsRUFHeEJDLEVBQW9CVSxFQUFJLFNBQVNSLEVBQVNTLEVBQU1DLEdBQzNDWixFQUFvQmEsRUFBRVgsRUFBU1MsSUFDbENHLE9BQU9DLGVBQWViLEVBQVNTLEVBQU0sQ0FBRUssWUFBWSxFQUFNQyxJQUFLTCxLQUtoRVosRUFBb0JrQixFQUFJLFNBQVNoQixHQUNYLG9CQUFYaUIsUUFBMEJBLE9BQU9DLGFBQzFDTixPQUFPQyxlQUFlYixFQUFTaUIsT0FBT0MsWUFBYSxDQUFFQyxNQUFPLFdBRTdEUCxPQUFPQyxlQUFlYixFQUFTLGFBQWMsQ0FBRW1CLE9BQU8sS0FRdkRyQixFQUFvQnNCLEVBQUksU0FBU0QsRUFBT0UsR0FFdkMsR0FEVSxFQUFQQSxJQUFVRixFQUFRckIsRUFBb0JxQixJQUMvQixFQUFQRSxFQUFVLE9BQU9GLEVBQ3BCLEdBQVcsRUFBUEUsR0FBOEIsaUJBQVZGLEdBQXNCQSxHQUFTQSxFQUFNRyxXQUFZLE9BQU9ILEVBQ2hGLElBQUlJLEVBQUtYLE9BQU9ZLE9BQU8s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Q0FDVixHQUFJQSxFQUFPdkMsTUFBUXdCLEVBQUl4QixLQUFPdUMsRUFBT3RDLFFBQVV1QixFQUFJdkIsT0FBU3NDLEVBQU8xRSxZQUFjMkQsRUFBSTNELFVBQ25GLE9BR0ZxRSxFQUFPVixFQUFNZSxRQUViaEIsS0FLTnRJLEVBQU9ELFFBQVUsU0FBVXNFLEVBQU1ILElBQy9CQSxFQUFVQSxHQUFXLElBQ2J1RCxXQUEyQyxpQkFBdkJ2RCxFQUFRdUQsV0FBMEJ2RCxFQUFRdUQsV0FBYSxHQUc5RXZELEVBQVE2RSxXQUEwQyxrQkFBdEI3RSxFQUFRNkUsWUFDdkM3RSxFQUFRNkUsVUFBWS9DLEtBR3RCLElBQUlXLEVBQVNELEVBQWFyQyxFQUFNSCxHQUVoQyxPQURBZ0QsRUFBZVAsRUFBUXpDLEdBQ2hCLFNBQWdCcUYsR0FHckIsSUFGQSxJQUFJQyxFQUFZLEdBRVB2SixFQUFJLEVBQUdBLEVBQUkwRyxFQUFPOUMsT0FBUTVELElBQUssQ0FDdEMsSUFBSXVFLEVBQU9tQyxFQUFPMUcsR0FDZGtILEVBQVdwQixFQUFZdkIsRUFBS29CLElBRTVCdUIsSUFDRkEsRUFBU0UsT0FDVG1DLEVBQVV0RyxLQUFLaUUsSUFJZm9DLEdBRUZyQyxFQURnQlIsRUFBYTZDLEVBQVNyRixHQUNaQSxHQUc1QixJQUFLLElBQUkyQixFQUFLLEVBQUdBLEVBQUsyRCxFQUFVM0YsT0FBUWdDLElBQU0sQ0FDNUMsSUFBSTRELEVBQVlELEVBQVUzRCxHQUUxQixHQUF1QixJQUFuQjRELEVBQVVwQyxLQUFZLENBQ3hCLElBQUssSUFBSUQsRUFBSSxFQUFHQSxFQUFJcUMsRUFBVXhDLE1BQU1wRCxPQUFRdUQsSUFDMUNxQyxFQUFVeEMsTUFBTUcsWUFHWHJCLEVBQVkwRCxFQUFVN0QiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiaW1wb3J0IFwiLi9zdHlsZS5jc3NcIjtcclxuXHJcbmZ1bmN0aW9uIGNvbXBvbmVudCgpIHtcclxuICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuXHJcbiAgLyplbGVtZW50LmlubmVySFRNTCA9IF8uam9pbihbXCJIZWxsb1wiLCBcIndlYnBhY2tcIl0sIFwiIFwiKTsqL1xyXG5cclxuICByZXR1cm4gZWxlbWVudDtcclxufVxyXG4vKk9WQU4gSU5LTElTVFJBRCBTS0lUIEVOTCBJTlNUUlVLVElPTi4uIDpEKi9cclxuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjb21wb25lbnQoKSk7XHJcblxyXG53aW5kb3cub25sb2FkID0gZnVuY3Rpb24oKSB7XHJcbiAgY2xhc3MgZ2FtZSB7XHJcbiAgICBjdXJyZW50bW9uc3RlcjogbnVtYmVyO1xyXG4gICAgcGxheWVyOiBhbnk7XHJcbiAgICBtb25zdGVyc0lucHV0OiBhbnk7XHJcbiAgICBtb25zdGVyTGlzdDogYW55O1xyXG4gICAgYWN0aW9uTGlzdDogYW55O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICB0aGlzLm1vbnN0ZXJzSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiI21vbnN0ZXJzIGlucHV0XCIpO1xyXG4gICAgICB0aGlzLm1vbnN0ZXJMaXN0ID0gW107XHJcbiAgICAgIHRoaXMuY3VycmVudG1vbnN0ZXIgPSAwO1xyXG4gICAgICB0aGlzLmdldE1vbnN0ZXJzKCk7XHJcblxyXG4gICAgICB0aGlzLnBsYXllciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcGxheWVyRGF0YVwiKTtcclxuXHJcbiAgICAgIHRoaXMuYWN0aW9uTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY29uc29sZVwiKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRNb25zdGVycygpIHtcclxuICAgICAgZm9yIChsZXQgbW9uc3RlciBvZiB0aGlzLm1vbnN0ZXJzSW5wdXQpIHtcclxuICAgICAgICB0aGlzLm1vbnN0ZXJMaXN0LnB1c2gobW9uc3Rlci5kYXRhc2V0Lm5hbWUpO1xyXG4gICAgICAgIHRoaXMubW9uc3Rlckxpc3QucHVzaChtb25zdGVyLmRhdGFzZXQuaGVhbHRoKTtcclxuICAgICAgICB0aGlzLm1vbnN0ZXJMaXN0LnB1c2gobW9uc3Rlci5kYXRhc2V0LnN0cmVuZ3RoKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGxvZ2dlcigpIHtcclxuICAgICAgbGV0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcclxuICAgICAgZWxlbWVudC5pbm5lckhUTUwgPVxyXG4gICAgICAgIFwiWW91IGRpZCBcIiArXHJcbiAgICAgICAgdGhpcy5wbGF5ZXIuZGF0YXNldC5zdHJlbmd0aCArXHJcbiAgICAgICAgXCIgZGFtYWdlLCBcIiArXHJcbiAgICAgICAgdGhpcy5tb25zdGVyTGlzdFt0aGlzLmN1cnJlbnRtb25zdGVyXSArXHJcbiAgICAgICAgXCIgaGl0IHlvdSBmb3IgXCIgK1xyXG4gICAgICAgIHRoaXMubW9uc3Rlckxpc3RbdGhpcy5jdXJyZW50bW9uc3RlciArIDJdICtcclxuICAgICAgICBcIiBkYW1hZ2UhXCI7XHJcbiAgICAgIHRoaXMuYWN0aW9uTGlzdC5hcHBlbmRDaGlsZChlbGVtZW50KTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgIHZhciBwbGF5ZXJOYW1lOiBIVE1MSW5wdXRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwbGF5ZXJOYW1lXCIpO1xyXG4gICAgICBwbGF5ZXJOYW1lLnZhbHVlID0gdGhpcy5wbGF5ZXIuZGF0YXNldC5uYW1lO1xyXG4gICAgICB2YXIgcGxheWVyU3RyZW5ndGg6IEhUTUxJbnB1dEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICAgIFwiI3BsYXllclN0cmVuZ3RoXCJcclxuICAgICAgKTtcclxuICAgICAgcGxheWVyU3RyZW5ndGgudmFsdWUgPSB0aGlzLnBsYXllci5kYXRhc2V0LnN0cmVuZ3RoO1xyXG4gICAgICB2YXIgcGxheWVySGVhbHRoOiBIVE1MSW5wdXRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgICBcIiNwbGF5ZXJIZWFsdGhcIlxyXG4gICAgICApO1xyXG4gICAgICBwbGF5ZXJIZWFsdGgudmFsdWUgPSB0aGlzLnBsYXllci5kYXRhc2V0LmhlYWx0aDtcclxuXHJcbiAgICAgIHZhciBtb25zdGVyTmFtZTogSFRNTElucHV0RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICAgXCIjbW9uc3Rlck5hbWVcIlxyXG4gICAgICApO1xyXG4gICAgICBtb25zdGVyTmFtZS52YWx1ZSA9IHRoaXMubW9uc3Rlckxpc3RbdGhpcy5jdXJyZW50bW9uc3Rlcl07XHJcbiAgICAgIHZhciBtb25zdGVySGVhbHRoOiBIVE1MSW5wdXRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgICBcIiNtb25zdGVySGVhbHRoXCJcclxuICAgICAgKTtcclxuICAgICAgbW9uc3RlckhlYWx0aC52YWx1ZSA9IHRoaXMubW9uc3Rlckxpc3RbdGhpcy5jdXJyZW50bW9uc3RlciArIDFdO1xyXG4gICAgICB2YXIgbW9uc3RlclN0cmVuZ3RoOiBIVE1MSW5wdXRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgICBcIiNtb25zdGVyU3RyZW5ndGhcIlxyXG4gICAgICApO1xyXG4gICAgICBtb25zdGVyU3RyZW5ndGgudmFsdWUgPSB0aGlzLm1vbnN0ZXJMaXN0W3RoaXMuY3VycmVudG1vbnN0ZXIgKyAyXTtcclxuXHJcbiAgICAgIHZhciBtb25zdGVybG9nbzogSFRNTElucHV0RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICAgXCIjbW9uc3Rlckljb25cIlxyXG4gICAgICApO1xyXG4gICAgICBpZiAodGhpcy5jdXJyZW50bW9uc3RlciA9PSAwKSBtb25zdGVybG9nby5zcmMgPSBcImltZy9za2VsLmpwZ1wiO1xyXG4gICAgICBpZiAodGhpcy5jdXJyZW50bW9uc3RlciA9PSAzKSBtb25zdGVybG9nby5zcmMgPSBcImltZy95LmpwZ1wiO1xyXG4gICAgICBpZiAodGhpcy5jdXJyZW50bW9uc3RlciA9PSA2KSBtb25zdGVybG9nby5zcmMgPSBcImltZy9za2VsLmpwZ1wiO1xyXG4gICAgICBpZiAodGhpcy5jdXJyZW50bW9uc3RlciA9PSA5KSBtb25zdGVybG9nby5zcmMgPSBcImltZy95LmpwZ1wiO1xyXG5cclxuICAgICAgaWYgKGdvLmN1cnJlbnRtb25zdGVyID4gZ28ubW9uc3Rlckxpc3QubGVuZ3RoIC0gMSkgbW9uc3Rlck5hbWUudmFsdWUgPSBcIlwiO1xyXG4gICAgICBlbHNlIHRoaXMubG9nZ2VyKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB2YXIgZ28gPSBuZXcgZ2FtZSgpO1xyXG4gIGdvLnJlbmRlcigpO1xyXG5cclxuICB2YXIgZmlnaHRCdXR0b246IEhUTUxJbnB1dEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2ZpZ2h0XCIpO1xyXG4gIGZpZ2h0QnV0dG9uLm9uY2xpY2sgPSBmdW5jdGlvbihlKSB7XHJcbiAgICBnby5wbGF5ZXIuZGF0YXNldC5oZWFsdGggPVxyXG4gICAgICBnby5wbGF5ZXIuZGF0YXNldC5oZWFsdGggLSBnby5tb25zdGVyTGlzdFtnby5jdXJyZW50bW9uc3RlciArIDJdO1xyXG5cclxuICAgIGdvLm1vbnN0ZXJMaXN0W2dvLmN1cnJlbnRtb25zdGVyICsgMV0gPVxyXG4gICAgICBnby5tb25zdGVyTGlzdFtnby5jdXJyZW50bW9uc3RlciArIDFdIC0gZ28ucGxheWVyLmRhdGFzZXQuc3RyZW5ndGg7XHJcblxyXG4gICAgaWYgKGdvLm1vbnN0ZXJMaXN0W2dvLmN1cnJlbnRtb25zdGVyICsgMV0gPD0gMClcclxuICAgICAgZ28uY3VycmVudG1vbnN0ZXIgPSBnby5jdXJyZW50bW9uc3RlciArIDM7XHJcblxyXG4gICAgaWYgKGdvLmN1cnJlbnRtb25zdGVyID4gZ28ubW9uc3Rlckxpc3QubGVuZ3RoIC0gMSkge1xyXG4gICAgICBhbGVydChcIldpbm5lciB3aW5uZXIgQ2hpY2tlbiBEaW5uZXIhXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGdvLnJlbmRlcigpO1xyXG4gIH07XHJcbn07XHJcbiIsInZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi9zdHlsZS5jc3NcIik7XG5cbmlmICh0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIHtcbiAgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xufVxuXG52YXIgb3B0aW9ucyA9IHt9XG5cbm9wdGlvbnMuaW5zZXJ0ID0gXCJoZWFkXCI7XG5vcHRpb25zLnNpbmdsZXRvbiA9IGZhbHNlO1xuXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanNcIikoY29udGVudCwgb3B0aW9ucyk7XG5cbmlmIChjb250ZW50LmxvY2Fscykge1xuICBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xufVxuIiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanNcIikoZmFsc2UpO1xuLy8gTW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIvKiBcXG5odG1sNWRvY3Rvci5jb20gUmVzZXQgU3R5bGVzaGVldFxcbnYxLjYuMVxcbkxhc3QgVXBkYXRlZDogMjAxMC0wOS0xN1xcbkF1dGhvcjogUmljaGFyZCBDbGFyayAtIGh0dHA6Ly9yaWNoY2xhcmtkZXNpZ24uY29tIFxcblR3aXR0ZXI6IEByaWNoX2NsYXJrXFxuKi9cXG5cXG5odG1sLFxcbmJvZHksXFxuZGl2LFxcbnNwYW4sXFxub2JqZWN0LFxcbmlmcmFtZSxcXG5oMSxcXG5oMixcXG5oMyxcXG5oNCxcXG5oNSxcXG5oNixcXG5wLFxcbmJsb2NrcXVvdGUsXFxucHJlLFxcbmFiYnIsXFxuYWRkcmVzcyxcXG5jaXRlLFxcbmNvZGUsXFxuZGVsLFxcbmRmbixcXG5lbSxcXG5pbWcsXFxuaW5zLFxcbmtiZCxcXG5xLFxcbnNhbXAsXFxuc21hbGwsXFxuc3Ryb25nLFxcbnN1YixcXG5zdXAsXFxudmFyLFxcbmIsXFxuaSxcXG5kbCxcXG5kdCxcXG5kZCxcXG5vbCxcXG51bCxcXG5saSxcXG5maWVsZHNldCxcXG5mb3JtLFxcbmxhYmVsLFxcbmxlZ2VuZCxcXG50YWJsZSxcXG5jYXB0aW9uLFxcbnRib2R5LFxcbnRmb290LFxcbnRoZWFkLFxcbnRyLFxcbnRoLFxcbnRkLFxcbmFydGljbGUsXFxuYXNpZGUsXFxuY2FudmFzLFxcbmRldGFpbHMsXFxuZmlnY2FwdGlvbixcXG5maWd1cmUsXFxuZm9vdGVyLFxcbmhlYWRlcixcXG5oZ3JvdXAsXFxubWVudSxcXG5uYXYsXFxuc2VjdGlvbixcXG5zdW1tYXJ5LFxcbnRpbWUsXFxubWFyayxcXG5hdWRpbyxcXG52aWRlbyB7XFxuICBtYXJnaW46IDA7XFxuICBwYWRkaW5nOiAwO1xcbiAgYm9yZGVyOiAwO1xcbiAgb3V0bGluZTogMDtcXG4gIGZvbnQtc2l6ZTogMTAwJTtcXG4gIHZlcnRpY2FsLWFsaWduOiBiYXNlbGluZTtcXG4gIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xcbn1cXG5cXG5ib2R5IHtcXG4gIGxpbmUtaGVpZ2h0OiAxO1xcbn1cXG5cXG5hcnRpY2xlLFxcbmFzaWRlLFxcbmRldGFpbHMsXFxuZmlnY2FwdGlvbixcXG5maWd1cmUsXFxuZm9vdGVyLFxcbmhlYWRlcixcXG5oZ3JvdXAsXFxubWVudSxcXG5uYXYsXFxuc2VjdGlvbiB7XFxuICBkaXNwbGF5OiBibG9jaztcXG59XFxuXFxubmF2IHVsIHtcXG4gIGxpc3Qtc3R5bGU6IG5vbmU7XFxufVxcblxcbmJsb2NrcXVvdGUsXFxucSB7XFxuICBxdW90ZXM6IG5vbmU7XFxufVxcblxcbmJsb2NrcXVvdGU6YmVmb3JlLFxcbmJsb2NrcXVvdGU6YWZ0ZXIsXFxucTpiZWZvcmUsXFxucTphZnRlciB7XFxuICBjb250ZW50OiBcXFwiXFxcIjtcXG4gIGNvbnRlbnQ6IG5vbmU7XFxufVxcblxcbmEge1xcbiAgbWFyZ2luOiAwO1xcbiAgcGFkZGluZzogMDtcXG4gIGZvbnQtc2l6ZTogMTAwJTtcXG4gIHZlcnRpY2FsLWFsaWduOiBiYXNlbGluZTtcXG4gIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xcbn1cXG5cXG4vKiBjaGFuZ2UgY29sb3VycyB0byBzdWl0IHlvdXIgbmVlZHMgKi9cXG5pbnMge1xcbiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmOTtcXG4gIGNvbG9yOiAjMDAwO1xcbiAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xcbn1cXG5cXG4vKiBjaGFuZ2UgY29sb3VycyB0byBzdWl0IHlvdXIgbmVlZHMgKi9cXG5tYXJrIHtcXG4gIGJhY2tncm91bmQtY29sb3I6ICNmZjk7XFxuICBjb2xvcjogIzAwMDtcXG4gIGZvbnQtc3R5bGU6IGl0YWxpYztcXG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xcbn1cXG5cXG5kZWwge1xcbiAgdGV4dC1kZWNvcmF0aW9uOiBsaW5lLXRocm91Z2g7XFxufVxcblxcbmFiYnJbdGl0bGVdLFxcbmRmblt0aXRsZV0ge1xcbiAgYm9yZGVyLWJvdHRvbTogMXB4IGRvdHRlZDtcXG4gIGN1cnNvcjogaGVscDtcXG59XFxuXFxudGFibGUge1xcbiAgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTtcXG4gIGJvcmRlci1zcGFjaW5nOiAwO1xcbn1cXG5cXG4vKiBjaGFuZ2UgYm9yZGVyIGNvbG91ciB0byBzdWl0IHlvdXIgbmVlZHMgKi9cXG5ociB7XFxuICBkaXNwbGF5OiBibG9jaztcXG4gIGhlaWdodDogMXB4O1xcbiAgYm9yZGVyOiAwO1xcbiAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNjY2NjY2M7XFxuICBtYXJnaW46IDFlbSAwO1xcbiAgcGFkZGluZzogMDtcXG59XFxuXFxuaW5wdXQsXFxuc2VsZWN0IHtcXG4gIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XFxufVxcbiNoZWFkZXIge1xcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xcbiAgYmFja2dyb3VuZDogYmlzcXVlO1xcbiAgcGFkZGluZzogMjBweDtcXG4gIGNsZWFyOiBib3RoO1xcbiAgYm9yZGVyLWJvdHRvbTogM3B4IHNvbGlkIGdyYXk7XFxufVxcbiNoZWFkZXIgaDEge1xcbiAgZm9udC1zaXplOiA0MHB4O1xcbn1cXG4jbW9uc3RlcnMge1xcbiAgZGlzcGxheTogbm9uZTtcXG59XFxuI2NvbWJhdEFyZWEge1xcbiAgZGlzcGxheTogZmxleDtcXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XFxufVxcbiNwbGF5ZXIsXFxuI21vbnN0ZXIge1xcbiAgcGFkZGluZzogMjBweCA0MHB4O1xcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xcbiAgZmxleC1ncm93OiAyO1xcbn1cXG4jZmlnaHQge1xcbiAgZmxleC1ncm93OiAxO1xcbn1cXG5sYWJlbCB7XFxuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxuICBtaW4td2lkdGg6IDEwMHB4O1xcbn1cXG5cIiwgXCJcIl0pO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qXG4gIE1JVCBMaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXG4gIEF1dGhvciBUb2JpYXMgS29wcGVycyBAc29rcmFcbiovXG4vLyBjc3MgYmFzZSBjb2RlLCBpbmplY3RlZCBieSB0aGUgY3NzLWxvYWRlclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXNcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHVzZVNvdXJjZU1hcCkge1xuICB2YXIgbGlzdCA9IFtdOyAvLyByZXR1cm4gdGhlIGxpc3Qgb2YgbW9kdWxlcyBhcyBjc3Mgc3RyaW5nXG5cbiAgbGlzdC50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuICAgIHJldHVybiB0aGlzLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgdmFyIGNvbnRlbnQgPSBjc3NXaXRoTWFwcGluZ1RvU3RyaW5nKGl0ZW0sIHVzZVNvdXJjZU1hcCk7XG5cbiAgICAgIGlmIChpdGVtWzJdKSB7XG4gICAgICAgIHJldHVybiBcIkBtZWRpYSBcIi5jb25jYXQoaXRlbVsyXSwgXCJ7XCIpLmNvbmNhdChjb250ZW50LCBcIn1cIik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjb250ZW50O1xuICAgIH0pLmpvaW4oJycpO1xuICB9OyAvLyBpbXBvcnQgYSBsaXN0IG9mIG1vZHVsZXMgaW50byB0aGUgbGlzdFxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xuXG5cbiAgbGlzdC5pID0gZnVuY3Rpb24gKG1vZHVsZXMsIG1lZGlhUXVlcnkpIHtcbiAgICBpZiAodHlwZW9mIG1vZHVsZXMgPT09ICdzdHJpbmcnKSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgIG1vZHVsZXMgPSBbW251bGwsIG1vZHVsZXMsICcnXV07XG4gICAgfVxuXG4gICAgdmFyIGFscmVhZHlJbXBvcnRlZE1vZHVsZXMgPSB7fTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1kZXN0cnVjdHVyaW5nXG4gICAgICB2YXIgaWQgPSB0aGlzW2ldWzBdO1xuXG4gICAgICBpZiAoaWQgIT0gbnVsbCkge1xuICAgICAgICBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2lkXSA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IG1vZHVsZXMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICB2YXIgaXRlbSA9IG1vZHVsZXNbX2ldOyAvLyBza2lwIGFscmVhZHkgaW1wb3J0ZWQgbW9kdWxlXG4gICAgICAvLyB0aGlzIGltcGxlbWVudGF0aW9uIGlzIG5vdCAxMDAlIHBlcmZlY3QgZm9yIHdlaXJkIG1lZGlhIHF1ZXJ5IGNvbWJpbmF0aW9uc1xuICAgICAgLy8gd2hlbiBhIG1vZHVsZSBpcyBpbXBvcnRlZCBtdWx0aXBsZSB0aW1lcyB3aXRoIGRpZmZlcmVudCBtZWRpYSBxdWVyaWVzLlxuICAgICAgLy8gSSBob3BlIHRoaXMgd2lsbCBuZXZlciBvY2N1ciAoSGV5IHRoaXMgd2F5IHdlIGhhdmUgc21hbGxlciBidW5kbGVzKVxuXG4gICAgICBpZiAoaXRlbVswXSA9PSBudWxsIHx8ICFhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2l0ZW1bMF1dKSB7XG4gICAgICAgIGlmIChtZWRpYVF1ZXJ5ICYmICFpdGVtWzJdKSB7XG4gICAgICAgICAgaXRlbVsyXSA9IG1lZGlhUXVlcnk7XG4gICAgICAgIH0gZWxzZSBpZiAobWVkaWFRdWVyeSkge1xuICAgICAgICAgIGl0ZW1bMl0gPSBcIihcIi5jb25jYXQoaXRlbVsyXSwgXCIpIGFuZCAoXCIpLmNvbmNhdChtZWRpYVF1ZXJ5LCBcIilcIik7XG4gICAgICAgIH1cblxuICAgICAgICBsaXN0LnB1c2goaXRlbSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBsaXN0O1xufTtcblxuZnVuY3Rpb24gY3NzV2l0aE1hcHBpbmdUb1N0cmluZyhpdGVtLCB1c2VTb3VyY2VNYXApIHtcbiAgdmFyIGNvbnRlbnQgPSBpdGVtWzFdIHx8ICcnOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLWRlc3RydWN0dXJpbmdcblxuICB2YXIgY3NzTWFwcGluZyA9IGl0ZW1bM107XG5cbiAgaWYgKCFjc3NNYXBwaW5nKSB7XG4gICAgcmV0dXJuIGNvbnRlbnQ7XG4gIH1cblxuICBpZiAodXNlU291cmNlTWFwICYmIHR5cGVvZiBidG9hID09PSAnZnVuY3Rpb24nKSB7XG4gICAgdmFyIHNvdXJjZU1hcHBpbmcgPSB0b0NvbW1lbnQoY3NzTWFwcGluZyk7XG4gICAgdmFyIHNvdXJjZVVSTHMgPSBjc3NNYXBwaW5nLnNvdXJjZXMubWFwKGZ1bmN0aW9uIChzb3VyY2UpIHtcbiAgICAgIHJldHVybiBcIi8qIyBzb3VyY2VVUkw9XCIuY29uY2F0KGNzc01hcHBpbmcuc291cmNlUm9vdCkuY29uY2F0KHNvdXJjZSwgXCIgKi9cIik7XG4gICAgfSk7XG4gICAgcmV0dXJuIFtjb250ZW50XS5jb25jYXQoc291cmNlVVJMcykuY29uY2F0KFtzb3VyY2VNYXBwaW5nXSkuam9pbignXFxuJyk7XG4gIH1cblxuICByZXR1cm4gW2NvbnRlbnRdLmpvaW4oJ1xcbicpO1xufSAvLyBBZGFwdGVkIGZyb20gY29udmVydC1zb3VyY2UtbWFwIChNSVQpXG5cblxuZnVuY3Rpb24gdG9Db21tZW50KHNvdXJjZU1hcCkge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcbiAgdmFyIGJhc2U2NCA9IGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHNvdXJjZU1hcCkpKSk7XG4gIHZhciBkYXRhID0gXCJzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxcIi5jb25jYXQoYmFzZTY0KTtcbiAgcmV0dXJuIFwiLyojIFwiLmNvbmNhdChkYXRhLCBcIiAqL1wiKTtcbn0iLCJcInVzZSBzdHJpY3RcIjtcblxudmFyIHN0eWxlc0luRG9tID0ge307XG5cbnZhciBpc09sZElFID0gZnVuY3Rpb24gaXNPbGRJRSgpIHtcbiAgdmFyIG1lbW87XG4gIHJldHVybiBmdW5jdGlvbiBtZW1vcml6ZSgpIHtcbiAgICBpZiAodHlwZW9mIG1lbW8gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAvLyBUZXN0IGZvciBJRSA8PSA5IGFzIHByb3Bvc2VkIGJ5IEJyb3dzZXJoYWNrc1xuICAgICAgLy8gQHNlZSBodHRwOi8vYnJvd3NlcmhhY2tzLmNvbS8jaGFjay1lNzFkODY5MmY2NTMzNDE3M2ZlZTcxNWMyMjJjYjgwNVxuICAgICAgLy8gVGVzdHMgZm9yIGV4aXN0ZW5jZSBvZiBzdGFuZGFyZCBnbG9iYWxzIGlzIHRvIGFsbG93IHN0eWxlLWxvYWRlclxuICAgICAgLy8gdG8gb3BlcmF0ZSBjb3JyZWN0bHkgaW50byBub24tc3RhbmRhcmQgZW52aXJvbm1lbnRzXG4gICAgICAvLyBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJwYWNrLWNvbnRyaWIvc3R5bGUtbG9hZGVyL2lzc3Vlcy8xNzdcbiAgICAgIG1lbW8gPSBCb29sZWFuKHdpbmRvdyAmJiBkb2N1bWVudCAmJiBkb2N1bWVudC5hbGwgJiYgIXdpbmRvdy5hdG9iKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbWVtbztcbiAgfTtcbn0oKTtcblxudmFyIGdldFRhcmdldCA9IGZ1bmN0aW9uIGdldFRhcmdldCgpIHtcbiAgdmFyIG1lbW8gPSB7fTtcbiAgcmV0dXJuIGZ1bmN0aW9uIG1lbW9yaXplKHRhcmdldCkge1xuICAgIGlmICh0eXBlb2YgbWVtb1t0YXJnZXRdID09PSAndW5kZWZpbmVkJykge1xuICAgICAgdmFyIHN0eWxlVGFyZ2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXQpOyAvLyBTcGVjaWFsIGNhc2UgdG8gcmV0dXJuIGhlYWQgb2YgaWZyYW1lIGluc3RlYWQgb2YgaWZyYW1lIGl0c2VsZlxuXG4gICAgICBpZiAod2luZG93LkhUTUxJRnJhbWVFbGVtZW50ICYmIHN0eWxlVGFyZ2V0IGluc3RhbmNlb2Ygd2luZG93LkhUTUxJRnJhbWVFbGVtZW50KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gVGhpcyB3aWxsIHRocm93IGFuIGV4Y2VwdGlvbiBpZiBhY2Nlc3MgdG8gaWZyYW1lIGlzIGJsb2NrZWRcbiAgICAgICAgICAvLyBkdWUgdG8gY3Jvc3Mtb3JpZ2luIHJlc3RyaWN0aW9uc1xuICAgICAgICAgIHN0eWxlVGFyZ2V0ID0gc3R5bGVUYXJnZXQuY29udGVudERvY3VtZW50LmhlYWQ7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAvLyBpc3RhbmJ1bCBpZ25vcmUgbmV4dFxuICAgICAgICAgIHN0eWxlVGFyZ2V0ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBtZW1vW3RhcmdldF0gPSBzdHlsZVRhcmdldDtcbiAgICB9XG5cbiAgICByZXR1cm4gbWVtb1t0YXJnZXRdO1xuICB9O1xufSgpO1xuXG5mdW5jdGlvbiBsaXN0VG9TdHlsZXMobGlzdCwgb3B0aW9ucykge1xuICB2YXIgc3R5bGVzID0gW107XG4gIHZhciBuZXdTdHlsZXMgPSB7fTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgaXRlbSA9IGxpc3RbaV07XG4gICAgdmFyIGlkID0gb3B0aW9ucy5iYXNlID8gaXRlbVswXSArIG9wdGlvbnMuYmFzZSA6IGl0ZW1bMF07XG4gICAgdmFyIGNzcyA9IGl0ZW1bMV07XG4gICAgdmFyIG1lZGlhID0gaXRlbVsyXTtcbiAgICB2YXIgc291cmNlTWFwID0gaXRlbVszXTtcbiAgICB2YXIgcGFydCA9IHtcbiAgICAgIGNzczogY3NzLFxuICAgICAgbWVkaWE6IG1lZGlhLFxuICAgICAgc291cmNlTWFwOiBzb3VyY2VNYXBcbiAgICB9O1xuXG4gICAgaWYgKCFuZXdTdHlsZXNbaWRdKSB7XG4gICAgICBzdHlsZXMucHVzaChuZXdTdHlsZXNbaWRdID0ge1xuICAgICAgICBpZDogaWQsXG4gICAgICAgIHBhcnRzOiBbcGFydF1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBuZXdTdHlsZXNbaWRdLnBhcnRzLnB1c2gocGFydCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHN0eWxlcztcbn1cblxuZnVuY3Rpb24gYWRkU3R5bGVzVG9Eb20oc3R5bGVzLCBvcHRpb25zKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3R5bGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGl0ZW0gPSBzdHlsZXNbaV07XG4gICAgdmFyIGRvbVN0eWxlID0gc3R5bGVzSW5Eb21baXRlbS5pZF07XG4gICAgdmFyIGogPSAwO1xuXG4gICAgaWYgKGRvbVN0eWxlKSB7XG4gICAgICBkb21TdHlsZS5yZWZzKys7XG5cbiAgICAgIGZvciAoOyBqIDwgZG9tU3R5bGUucGFydHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgZG9tU3R5bGUucGFydHNbal0oaXRlbS5wYXJ0c1tqXSk7XG4gICAgICB9XG5cbiAgICAgIGZvciAoOyBqIDwgaXRlbS5wYXJ0cy5sZW5ndGg7IGorKykge1xuICAgICAgICBkb21TdHlsZS5wYXJ0cy5wdXNoKGFkZFN0eWxlKGl0ZW0ucGFydHNbal0sIG9wdGlvbnMpKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHBhcnRzID0gW107XG5cbiAgICAgIGZvciAoOyBqIDwgaXRlbS5wYXJ0cy5sZW5ndGg7IGorKykge1xuICAgICAgICBwYXJ0cy5wdXNoKGFkZFN0eWxlKGl0ZW0ucGFydHNbal0sIG9wdGlvbnMpKTtcbiAgICAgIH1cblxuICAgICAgc3R5bGVzSW5Eb21baXRlbS5pZF0gPSB7XG4gICAgICAgIGlkOiBpdGVtLmlkLFxuICAgICAgICByZWZzOiAxLFxuICAgICAgICBwYXJ0czogcGFydHNcbiAgICAgIH07XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zKSB7XG4gIHZhciBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG5cbiAgaWYgKHR5cGVvZiBvcHRpb25zLmF0dHJpYnV0ZXMubm9uY2UgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIG5vbmNlID0gdHlwZW9mIF9fd2VicGFja19ub25jZV9fICE9PSAndW5kZWZpbmVkJyA/IF9fd2VicGFja19ub25jZV9fIDogbnVsbDtcblxuICAgIGlmIChub25jZSkge1xuICAgICAgb3B0aW9ucy5hdHRyaWJ1dGVzLm5vbmNlID0gbm9uY2U7XG4gICAgfVxuICB9XG5cbiAgT2JqZWN0LmtleXMob3B0aW9ucy5hdHRyaWJ1dGVzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICBzdHlsZS5zZXRBdHRyaWJ1dGUoa2V5LCBvcHRpb25zLmF0dHJpYnV0ZXNba2V5XSk7XG4gIH0pO1xuXG4gIGlmICh0eXBlb2Ygb3B0aW9ucy5pbnNlcnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICBvcHRpb25zLmluc2VydChzdHlsZSk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIHRhcmdldCA9IGdldFRhcmdldChvcHRpb25zLmluc2VydCB8fCAnaGVhZCcpO1xuXG4gICAgaWYgKCF0YXJnZXQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvdWxkbid0IGZpbmQgYSBzdHlsZSB0YXJnZXQuIFRoaXMgcHJvYmFibHkgbWVhbnMgdGhhdCB0aGUgdmFsdWUgZm9yIHRoZSAnaW5zZXJ0JyBwYXJhbWV0ZXIgaXMgaW52YWxpZC5cIik7XG4gICAgfVxuXG4gICAgdGFyZ2V0LmFwcGVuZENoaWxkKHN0eWxlKTtcbiAgfVxuXG4gIHJldHVybiBzdHlsZTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlKSB7XG4gIC8vIGlzdGFuYnVsIGlnbm9yZSBpZlxuICBpZiAoc3R5bGUucGFyZW50Tm9kZSA9PT0gbnVsbCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHN0eWxlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc3R5bGUpO1xufVxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5cblxudmFyIHJlcGxhY2VUZXh0ID0gZnVuY3Rpb24gcmVwbGFjZVRleHQoKSB7XG4gIHZhciB0ZXh0U3RvcmUgPSBbXTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHJlcGxhY2UoaW5kZXgsIHJlcGxhY2VtZW50KSB7XG4gICAgdGV4dFN0b3JlW2luZGV4XSA9IHJlcGxhY2VtZW50O1xuICAgIHJldHVybiB0ZXh0U3RvcmUuZmlsdGVyKEJvb2xlYW4pLmpvaW4oJ1xcbicpO1xuICB9O1xufSgpO1xuXG5mdW5jdGlvbiBhcHBseVRvU2luZ2xldG9uVGFnKHN0eWxlLCBpbmRleCwgcmVtb3ZlLCBvYmopIHtcbiAgdmFyIGNzcyA9IHJlbW92ZSA/ICcnIDogb2JqLmNzczsgLy8gRm9yIG9sZCBJRVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAgKi9cblxuICBpZiAoc3R5bGUuc3R5bGVTaGVldCkge1xuICAgIHN0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IHJlcGxhY2VUZXh0KGluZGV4LCBjc3MpO1xuICB9IGVsc2Uge1xuICAgIHZhciBjc3NOb2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKTtcbiAgICB2YXIgY2hpbGROb2RlcyA9IHN0eWxlLmNoaWxkTm9kZXM7XG5cbiAgICBpZiAoY2hpbGROb2Rlc1tpbmRleF0pIHtcbiAgICAgIHN0eWxlLnJlbW92ZUNoaWxkKGNoaWxkTm9kZXNbaW5kZXhdKTtcbiAgICB9XG5cbiAgICBpZiAoY2hpbGROb2Rlcy5sZW5ndGgpIHtcbiAgICAgIHN0eWxlLmluc2VydEJlZm9yZShjc3NOb2RlLCBjaGlsZE5vZGVzW2luZGV4XSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0eWxlLmFwcGVuZENoaWxkKGNzc05vZGUpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBhcHBseVRvVGFnKHN0eWxlLCBvcHRpb25zLCBvYmopIHtcbiAgdmFyIGNzcyA9IG9iai5jc3M7XG4gIHZhciBtZWRpYSA9IG9iai5tZWRpYTtcbiAgdmFyIHNvdXJjZU1hcCA9IG9iai5zb3VyY2VNYXA7XG5cbiAgaWYgKG1lZGlhKSB7XG4gICAgc3R5bGUuc2V0QXR0cmlidXRlKCdtZWRpYScsIG1lZGlhKTtcbiAgfVxuXG4gIGlmIChzb3VyY2VNYXAgJiYgYnRvYSkge1xuICAgIGNzcyArPSBcIlxcbi8qIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsXCIuY29uY2F0KGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHNvdXJjZU1hcCkpKSksIFwiICovXCIpO1xuICB9IC8vIEZvciBvbGQgSUVcblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgICovXG5cblxuICBpZiAoc3R5bGUuc3R5bGVTaGVldCkge1xuICAgIHN0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IGNzcztcbiAgfSBlbHNlIHtcbiAgICB3aGlsZSAoc3R5bGUuZmlyc3RDaGlsZCkge1xuICAgICAgc3R5bGUucmVtb3ZlQ2hpbGQoc3R5bGUuZmlyc3RDaGlsZCk7XG4gICAgfVxuXG4gICAgc3R5bGUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKSk7XG4gIH1cbn1cblxudmFyIHNpbmdsZXRvbiA9IG51bGw7XG52YXIgc2luZ2xldG9uQ291bnRlciA9IDA7XG5cbmZ1bmN0aW9uIGFkZFN0eWxlKG9iaiwgb3B0aW9ucykge1xuICB2YXIgc3R5bGU7XG4gIHZhciB1cGRhdGU7XG4gIHZhciByZW1vdmU7XG5cbiAgaWYgKG9wdGlvbnMuc2luZ2xldG9uKSB7XG4gICAgdmFyIHN0eWxlSW5kZXggPSBzaW5nbGV0b25Db3VudGVyKys7XG4gICAgc3R5bGUgPSBzaW5nbGV0b24gfHwgKHNpbmdsZXRvbiA9IGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zKSk7XG4gICAgdXBkYXRlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlLCBzdHlsZUluZGV4LCBmYWxzZSk7XG4gICAgcmVtb3ZlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlLCBzdHlsZUluZGV4LCB0cnVlKTtcbiAgfSBlbHNlIHtcbiAgICBzdHlsZSA9IGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zKTtcbiAgICB1cGRhdGUgPSBhcHBseVRvVGFnLmJpbmQobnVsbCwgc3R5bGUsIG9wdGlvbnMpO1xuXG4gICAgcmVtb3ZlID0gZnVuY3Rpb24gcmVtb3ZlKCkge1xuICAgICAgcmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlKTtcbiAgICB9O1xuICB9XG5cbiAgdXBkYXRlKG9iaik7XG4gIHJldHVybiBmdW5jdGlvbiB1cGRhdGVTdHlsZShuZXdPYmopIHtcbiAgICBpZiAobmV3T2JqKSB7XG4gICAgICBpZiAobmV3T2JqLmNzcyA9PT0gb2JqLmNzcyAmJiBuZXdPYmoubWVkaWEgPT09IG9iai5tZWRpYSAmJiBuZXdPYmouc291cmNlTWFwID09PSBvYmouc291cmNlTWFwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdXBkYXRlKG9iaiA9IG5ld09iaik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlbW92ZSgpO1xuICAgIH1cbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAobGlzdCwgb3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgb3B0aW9ucy5hdHRyaWJ1dGVzID0gdHlwZW9mIG9wdGlvbnMuYXR0cmlidXRlcyA9PT0gJ29iamVjdCcgPyBvcHRpb25zLmF0dHJpYnV0ZXMgOiB7fTsgLy8gRm9yY2Ugc2luZ2xlLXRhZyBzb2x1dGlvbiBvbiBJRTYtOSwgd2hpY2ggaGFzIGEgaGFyZCBsaW1pdCBvbiB0aGUgIyBvZiA8c3R5bGU+XG4gIC8vIHRhZ3MgaXQgd2lsbCBhbGxvdyBvbiBhIHBhZ2VcblxuICBpZiAoIW9wdGlvbnMuc2luZ2xldG9uICYmIHR5cGVvZiBvcHRpb25zLnNpbmdsZXRvbiAhPT0gJ2Jvb2xlYW4nKSB7XG4gICAgb3B0aW9ucy5zaW5nbGV0b24gPSBpc09sZElFKCk7XG4gIH1cblxuICB2YXIgc3R5bGVzID0gbGlzdFRvU3R5bGVzKGxpc3QsIG9wdGlvbnMpO1xuICBhZGRTdHlsZXNUb0RvbShzdHlsZXMsIG9wdGlvbnMpO1xuICByZXR1cm4gZnVuY3Rpb24gdXBkYXRlKG5ld0xpc3QpIHtcbiAgICB2YXIgbWF5UmVtb3ZlID0gW107XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0eWxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGl0ZW0gPSBzdHlsZXNbaV07XG4gICAgICB2YXIgZG9tU3R5bGUgPSBzdHlsZXNJbkRvbVtpdGVtLmlkXTtcblxuICAgICAgaWYgKGRvbVN0eWxlKSB7XG4gICAgICAgIGRvbVN0eWxlLnJlZnMtLTtcbiAgICAgICAgbWF5UmVtb3ZlLnB1c2goZG9tU3R5bGUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChuZXdMaXN0KSB7XG4gICAgICB2YXIgbmV3U3R5bGVzID0gbGlzdFRvU3R5bGVzKG5ld0xpc3QsIG9wdGlvbnMpO1xuICAgICAgYWRkU3R5bGVzVG9Eb20obmV3U3R5bGVzLCBvcHRpb25zKTtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgbWF5UmVtb3ZlLmxlbmd0aDsgX2krKykge1xuICAgICAgdmFyIF9kb21TdHlsZSA9IG1heVJlbW92ZVtfaV07XG5cbiAgICAgIGlmIChfZG9tU3R5bGUucmVmcyA9PT0gMCkge1xuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IF9kb21TdHlsZS5wYXJ0cy5sZW5ndGg7IGorKykge1xuICAgICAgICAgIF9kb21TdHlsZS5wYXJ0c1tqXSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgZGVsZXRlIHN0eWxlc0luRG9tW19kb21TdHlsZS5pZF07XG4gICAgICB9XG4gICAgfVxuICB9O1xufTsiXSwic291cmNlUm9vdCI6IiJ9